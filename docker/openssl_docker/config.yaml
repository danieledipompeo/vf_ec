paths:
  base_dir: /app
  input_dir: /app/inputs
  output_dir: /app/output
  log_dir: /app/output/log
  cache_dir: /app/output/log/cache
  gcda_dir: /app/output/gcda_files

dataset:
  csv_url: "https://gist.githubusercontent.com/waheed-sep/935cfc1ba42b2475d45336a4c779cbc8/raw/ea91568360d87979373a7eca38f289c9bf30d103/cwe_projects.csv"
  csv_file: cwe_projects.csv

project:
  - php-src:
      name: "php-src"
      repository: "https://github.com/php/php-src.git"
      build:
        commands: {}
        flags: {}
        compiler: ""
        
  - vim:
      name: "vim"
      repository: "https://github.com/vim/vim.git"
      build:
        commands: {}
        flags: {}
        compiler: ""

  - ffmpeg:
      name: "FFmpeg"
      repository: "https://github.com/FFmpeg/FFmpeg.git"
      build:
        commands: {}
        flags: {}
        compiler: ""

  - openssl:
      name: "openssl"
      repository: "https://github.com/openssl/openssl"
      build:
        commands:
          configure:
            primary: "./config -d no-shared no-asm no-threads"
            fallback: "./Configure linux-x86_64 no-shared no-asm"
          compile:
            clean: "make clean"
            depend: "make depend"
            make: "make"
        flags:
          cflags: "-fPIC -Wno-error -Wno-implicit-function-declaration -Wno-format-security -std=gnu89 -O0"
          lflags: "-no-pie"
          coverage_cflags: "--coverage"
          coverage_lflags: "--coverage"
        compiler: "gcc"
  
test:
  strategies:
    modern:
      recipe_dir: "test/recipes"
      file_pattern: "*.t"
      command_template: "make test TESTS='{test_name}'"
    legacy:
      test_dir: "test"
      file_patterns:
        - "test_*.c"
        - "*test.c"
      build_command_template: "make {test_name}"
      run_binary_template: "test/{test_name}"
  limit: null  # Set to integer to limit number of tests, null for all tests

coverage:
  enabled: true
  gcda_pattern: "*.gcda"
  source_extension: ".c"

energy:
  iterations: 5
  timeout_ms: 1000
  cool_down_sec: 1.0
  target_duration_sec: 2.0
  rapl:
    events:
      - "power/energy-pkg/"
    additional_counters:
      - "cycles"
      - "instructions"
  perf:
    binary: "perf"
    options:
      all_cpus: true
      delimiter: ","

pipeline:
  csv_write_interval: 50
  logging:
    level: "INFO"
    format: "%(asctime)s - %(levelname)s - %(message)s"
    file: "pipeline_execution.log"

git:
  commands:
    reset: "git reset --hard"
    clean: "git clean -fdx"
    checkout: "git checkout -f {commit}"
    diff_tree: "git diff-tree --no-commit-id --name-only -r {commit}"
